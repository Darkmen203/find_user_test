<main class="main" [class.no-scroll]="modalOpen">
  <div class="content">
    <div class="left-side">
      <h1>Hello, {{ title() }}</h1>
      <div>
        <input
          type="search"
          name="search"
          id="searchByName"
          (input)="onChangeSearch()"
          [(ngModel)]="search_name"
          placeholder="Поиск по имени" />
      </div>

      <label for="filters">Фильтры:</label>
      <select
        name="filters"
        id="filters"
        [(ngModel)]="filter"
        (change)="onChangeSearch()">
        <option value="all">Показать всех</option>
        <option value="active">Только активные</option>
        <option value="not_active">Только не активные</option>
      </select>
    </div>

    <hr class="divider" aria-label="Divider"/>

    <div class="right-side">
      <div class="pill-group">
        @for (user of render_users; track user.id) {
          <div
            class="user-card"
            role="button"
            tabindex="0"
            (click)="openModal(user)"
            (keyup.enter)="openModal(user)">
            <p>{{ user.name }}</p>
            <p>{{ user.email }}</p>
            <p>{{ user.active ? "Активен" : "Не активен" }}</p>
          </div>
        }
      </div>
    </div>
  </div>
</main>

<div
  class="modal-backdrop"
  *ngIf="modalOpen"
  (click)="closeModal()"
  aria-hidden="true">
</div>

<dialog
  class="modal"
  *ngIf="modalOpen"
  aria-modal="true"
  aria-labelledby="emailModalTitle"
  (keydown.escape)="closeModal()"
  (click)="closeModal()">

  <div class="modal-card" (click)="$event.stopPropagation()">
    <h2 id="emailModalTitle">Email пользователя</h2>
    <p class="modal-email">{{ selectedEmail }}</p>

    <div class="modal-actions">
      <button type="button" class="modal-close" (click)="closeModal()">
        Закрыть
      </button>
    </div>
  </div>
</dialog>
